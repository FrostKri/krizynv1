let handler = m => m
let levelling = require('../lib/levelling')
handler.before = m => {
    let user = global.db.data.users[m.sender]
    if (!user.autolevelup) return
    if (m.sender === global.conn.user.jid) return
    let before = user.level * 1
    while (levelling.canLevelUp(user.level, user.exp, global.multiplier)) user.level++
    if (before !== user.level) {
        let str = `
â•­â”€â”€â”€â—ª ã€” ğ—Ÿ ğ—˜ ğ—© ğ—˜ ğ—Ÿ   ğ—¨ ğ—£ ã€•
â”ƒâ¬¡ Name : @${m.sender.split`@`[0]}
â”ƒâ¬¡ Level : *${before}* â³ *${user.level}*
â•°â”€â”€â”€â”€â”€â”€â”€â”€â¬£
â¬£ Terus berinteraksi dengan bot 
â¬£ supaya naik level selanjutnya...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ğ—¡ğ—¢ğ—§ğ—˜: 
â”‚â¥ğ™‚ğ™ªğ™£ğ™–ğ™ ğ™–ğ™£ ğ˜½ğ™Šğ™ ğ™ğ™šğ™˜ğ™ªğ™ ğ™ªğ™¥ğ™£ğ™®ğ™–!
â”‚â¥ğ™…ğ™–ğ™£ğ™œğ™–ğ™£ ğ˜¾ğ™–ğ™¡ğ™¡/ğ™‘ğ™˜ ğ˜½ğ™Šğ™!
â”‚â¥ğ˜¿ğ™šğ™¢ğ™ ğ™ ğ™šğ™£ğ™®ğ™–ğ™¢ğ™–ğ™£ğ™–ğ™£ ğ™—ğ™šğ™§ğ™¨ğ™–ğ™¢ğ™–
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
`.trim()
        conn.send2Button(m.chat, str, footer, 'PROFILE', '#profile', 'Off Auto Levelup', '#off autolevelup', false, {
            contextInfo: {
                mentionedJid: [m.sender]
            }
        })
    }
    return true
}
 
module.exports = handler
